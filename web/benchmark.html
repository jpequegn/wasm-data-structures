<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Structure Benchmarks</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #121317;
            color: #E0E6F0;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #1F4E8C; margin-bottom: 20px; }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        button {
            padding: 8px 16px;
            background: #1F4E8C;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover { background: #2762B3; }
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .result-box {
            background: #1E2130;
            padding: 20px;
            border-radius: 4px;
            border: 1px solid #333A56;
        }
        .result-box h3 {
            color: #1F4E8C;
            margin-bottom: 15px;
        }
        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #333A56;
        }
        .metric-label { color: #A3A9BF; font-size: 12px; }
        .metric-value { font-weight: bold; color: #28A745; }
        #output {
            background: #0a0c0f;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #333A56;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Data Structure Benchmarks</h1>
        <p>Compare HashMap performance across implementations</p>

        <div class="controls">
            <button onclick="benchmarkJSHashMap()">Benchmark JS HashMap</button>
            <button onclick="clearResults()">Clear</button>
        </div>

        <div class="results" id="results"></div>
        <div id="output"></div>
    </div>

    <script src="HashMap.js"></script>
    <script>
        const resultsDiv = document.getElementById('results');
        const outputDiv = document.getElementById('output');

        function log(msg) {
            outputDiv.innerHTML += msg + '<br>';
            outputDiv.scrollTop = outputDiv.scrollHeight;
        }

        function clearResults() {
            resultsDiv.innerHTML = '';
            outputDiv.innerHTML = '';
        }

        function benchmarkJSHashMap() {
            log('=== JavaScript HashMap Benchmark ===<br>');

            const map = new HashMap(256);
            const itemCount = 10000;

            // Insertion benchmark
            log(`Inserting ${itemCount} items...`);
            const start = performance.now();

            for (let i = 0; i < itemCount; i++) {
                map.insert(`key${i}`, i);
            }

            const insertTime = performance.now() - start;
            log(`Insert time: ${insertTime.toFixed(2)}ms<br>`);

            // Get metrics
            const metrics = map.getMetrics();

            // Display results
            const html = `
                <div class="result-box">
                    <h3>JavaScript HashMap (10k items)</h3>
                    <div class="metric-row">
                        <span class="metric-label">Total Insertions</span>
                        <span class="metric-value">${metrics.totalInsertions}</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Collisions</span>
                        <span class="metric-value">${metrics.totalCollisions}</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Max Chain Length</span>
                        <span class="metric-value">${metrics.maxChainLength}</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Load Factor</span>
                        <span class="metric-value">${metrics.averageLoadFactor.toFixed(2)}</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Insert Time</span>
                        <span class="metric-value">${insertTime.toFixed(2)}ms</span>
                    </div>
                </div>
            `;

            resultsDiv.innerHTML = html;
            log('Benchmark complete!');
        }
    </script>
</body>
</html>
